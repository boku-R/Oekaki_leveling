<% if users.exists? %>
  <table class="table table-borderless table-hover">
    <thead>
      <tr>
        <th scope="col" style="width: 10%"></th>
        <th scope="col" style="width: 20%"></th>
        <th scope="col" style="width: 40%"></th>
        <th scope="col" style="width: 30%"></th>
      </tr>
    </thead>
    <tbody>
      <% users.each do |user| %>
        <tr>
          <td>
            <%= link_to user_path(user.id), method: :get do %>
              <%= image_tag user.get_profile_image(100,100),class: "mr-3 rounded-circle mx-auto" %>
            <% end %>
          </td>
          <td class="align-middle"><p class="h5"><%= user.handlename %></p> @<%= user.username %> <br><i class="fas fa-palette"></i> Lv.<%= user.level %></td>
          <td class="align-middle"><%= user.introduction %></td>
          <td class="align-middle">
            <% if user != current_user && current_user.present? %>
              <% if current_user.following?(user) %>
                <%= link_to "フォロー外す", user_relationships_path(user.id), method: :delete, class:"btn btn-secondary" %>
              <% else %>
                <%= link_to "フォローする", user_relationships_path(user.id), method: :post, class:"btn btn-light" %>
              <% end %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>ユーザーはいません</p>
<% end %>

<!--トップページにいる時だけ無効化する-->
<% if !current_page?(root_path) %>
  <div class="row d-flex flex-column align-items-center mt-3">
    <ul class="pagination">
      <%= paginate @users, theme: 'twitter-bootstrap-4' %>
    </ul>
  </div>
<% end %>